---
layout: post
title: Passing Arguments in JSONP callback
date: '2012-09-17T01:32:00-04:00'
tags: []
tumblr_url: https://encoreptl.tumblr.com/post/31716362401/passing-arguments-in-jsonp-callback
---
<p>It is not possible to pass arguments in your JSONP callback function directly currently as the callback function is invoked with only one argument and that is the response from the server. To solve this problem there is a hack in javascript you can do to pass arguments to your callback function.</p>
<p>First lets review functions and their scope. Any function you create using the syntax below can be invoked by just calling the someFunc() or window.someFunc() since the function is part of the global scope and all global variables and functions are attributes of the window object.</p>
<p>function someFunc() { /*Your Code*/ };</p>

<p>Now knowing this you can create bunch of functions with dynamic names by just indexing window object with a callbackName that we are generating here using a globalCounter.</p>
<pre class="default prettyprint"><code><span class="pln"><span class="kwd">var globalCounter = 0;</span></span></code></pre>
<pre class="default prettyprint"><code><span class="pln"><span class="kwd">var</span><span class="pln"> callbackName </span><span class="pun">=</span><span class="pln"> </span><span class="str">'callback_'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> globalCounter++</span><span class="pun">;</span></span></code></pre>
<pre class="default prettyprint"><code>window[callbackName] = function(response, args) { /* your code */ }</code></pre>
<p>Using closure you can call the real callback which takes one extra argument along with the response:</p>
<pre class="default prettyprint"><code><span class="kwd">function</span><span class="pln"> jsonpOneArg</span><span class="pun">(</span><span class="pln">realCallback</span><span class="pun">,</span><span class="pln"> arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br/></span><span class="pln">    </span><span class="kwd">var</span><span class="pln"> callbackName </span><span class="pun">=</span><span class="pln"> </span><span class="str">'callback_'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> globalCounter++</span><span class="pun">;</span><span class="pln"><br/>    window</span><span class="pun">[</span><span>callbackName</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">response</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><br/><span class="pln">        </span><span>realCallback</span><span class="pun">(</span><span class="pln">response</span><span class="pun">,</span><span class="pln"> arg</span><span class="pun">);</span><br/><span class="pln">        </span><span class="kwd">delete</span><span class="pln"> window</span><span class="pun">[</span><span>callbackName</span><span class="pun">];</span><br/><span class="pln">    </span><span class="pun">};</span><span class="pln"><br/>    </span><span class="kwd">return</span><span class="pln"> </span><span>callbackName</span><span>;</span><br/><span class="pun">}</span></code></pre>
<p>Now you can call jsonpOneArg() with your real callback and argument and it will return a string version of the callback functions name which you can use as your jsonp callback. Now when the server responds it sends just the response to your callback function called &ldquo;callback_0&rdquo; and because in its scope it has a pointer to the real callback it will invoke that function with the argument you passed.</p>
